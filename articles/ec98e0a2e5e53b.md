---
title: "[Dockerå…¥é–€#1]ç’°å¢ƒæ§‹ç¯‰ for Windows"
emoji: "ğŸ‘»"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["docker", "windows", "wsl"]
published: true
---

# Dockerç’°å¢ƒæ§‹ç¯‰

## Windowsã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Windowsã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’[Microsoft Store](https://aka.ms/terminal)ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚

![install-windows-terminal.png](https://raw.githubusercontent.com/takuya-motoshima/zenn-content/main/articles/ec98e0a2e5e53b/install-windows-terminal.png)

## Gitã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Gitã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ã‚’[https://git-scm.com/download/win](https://git-scm.com/download/win)ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—å®Ÿè¡Œã™ã‚‹ã€‚  
å®Ÿè¡Œã—ãŸã‚‰ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®å†…å®¹ã«åŒæ„ã—æ¬¡ã¸é€²ã‚€ã€‚

![install-git-1.png](https://raw.githubusercontent.com/takuya-motoshima/zenn-content/main/articles/ec98e0a2e5e53b/install-git-1.png)

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®é¸æŠã§ã€ä½•ã‚‚å¤‰æ›´ã›ãšæ¬¡ã¸é€²ã‚€ã€‚

![install-git-2.png](https://raw.githubusercontent.com/takuya-motoshima/zenn-content/main/articles/ec98e0a2e5e53b/install-git-2.png)

æ–°ã—ã„ãƒªãƒã‚¸ãƒˆãƒªã®æœ€åˆã®ãƒ–ãƒ©ãƒ³ãƒåã‚’è¨­å®šã™ã‚‹ã€‚  
GitHubã®ä»•æ§˜ã«åˆã‚ã›ã¦mainã«å¤‰æ›´ã—æ¬¡ã¸é€²ã‚€ã€‚

![install-git-3.png](https://raw.githubusercontent.com/takuya-motoshima/zenn-content/main/articles/ec98e0a2e5e53b/install-git-3.png)

Gitã«æ¥ç¶šã™ã‚‹éš›ã«èªè¨¼è£œåŠ©ã‚’ä½¿ç”¨ã™ã‚‹ã‹ã©ã†ã‹ã‚’è¨­å®šã™ã‚‹ã€‚  
[Git Credential Manager Core]ã‚’é¸æŠã—æ¬¡ã¸é€²ã‚€ã€‚  
â€»[Git Credential Manager Core]ã¯ã€GitHubç­‰ã¨æ¥ç¶šã—ãŸæ™‚ã®2å›ç›®ä»¥é™ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ã®å…¥åŠ›ã‚’çœç•¥ã™ã‚‹ã€‚

![install-git-4.png](https://raw.githubusercontent.com/takuya-motoshima/zenn-content/main/articles/ec98e0a2e5e53b/install-git-4.png)

è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®è¨­å®šã€‚  
ä½•ã‚‚é¸æŠã›ãšã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¸é€²ã‚€ã€‚

![install-git-5.png](https://raw.githubusercontent.com/takuya-motoshima/zenn-content/main/articles/ec98e0a2e5e53b/install-git-5.png)

GitBashã‚’é–‹ãã€Gitã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã€‚

```sh
$ git --version;
git version 2.32.0.windows.1
```

ä»¥ä¸Šã§ã€Gitã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯å®Œäº†ã€‚

## WSL2æœ‰åŠ¹åŒ–

PowerShellã‚’é–‹ãã€ä»¥ä¸‹ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ç®¡ç†è€…ã¨ã—ã¦PowerShellã‚’é–‹ãã€‚

```sh
$ Start-Process powershell.exe -Verb runas;
```

Linuxç”¨Windowsã‚µãƒ–ã‚·ã‚¹ãƒ†ãƒ ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã€‚

```sh
$ dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart;
```

ä»®æƒ³ãƒã‚·ãƒ³ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã€‚

```sh
$ dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart;
```

ãƒã‚·ãƒ³ã‚’å†èµ·å‹•ã—ã€Linuxã‚«ãƒ¼ãƒãƒ«æ›´æ–°ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’[ã“ã“](https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi)ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—å®Ÿè¡Œã™ã‚‹ã€‚

![enable-wsl2-1.png](https://raw.githubusercontent.com/takuya-motoshima/zenn-content/main/articles/ec98e0a2e5e53b/enable-wsl2-1.png)

ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ã§ã€PowerShellã‚’é–‹ãæ–°ã—ã„Linuxãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸéš›ã®æ—¢å®šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«WSL2ã‚’è¨­å®šã™ã‚‹ã€‚

```sh
$ wsl --set-default-version 2;
```

Microsoft Storeã‚’é–‹ãã€[ã“ã“](https://www.microsoft.com/store/apps/9n6svws3rx71)ã‹ã‚‰ã€Ubuntu 20.04 LTSãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚

![enable-wsl2-2.png](https://raw.githubusercontent.com/takuya-motoshima/zenn-content/main/articles/ec98e0a2e5e53b/enable-wsl2-2.png)

æ–°ã—ãã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸLinuxãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆã‚ã¦èµ·å‹•ã™ã‚‹ã¨ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒé–‹ãã®ã§ã€æ–°ã—ã„Linuxãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ä½œæˆã€‚  

```sh
Installing, this may take a few minutes...
Please create a default UNIX user account. The username does not need to match your Windows username.
For more information visit: https://aka.ms/wslusers
Enter new UNIX username: takuya-motoshima
New password:
Retype new password:
passwd: password updated successfully
Installation successful!
```

ä»¥ä¸Šã§ã€WindowsOSã¨å®Œå…¨ã«çµ±åˆã•ã‚ŒãŸLinuxãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨è¨­å®šã¯å®Œäº†ã€‚

## Dockerã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

[https://www.docker.com/](https://www.docker.com/)ã‚’é–‹ãã€[Get started]ã‚’é¸æŠã—ã€DockerDesktopã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸ã‚’é–‹ãã€‚

![install-docker-1.png](https://raw.githubusercontent.com/takuya-motoshima/zenn-content/main/articles/ec98e0a2e5e53b/install-docker-1.png)

\[Docker Desktop\]ã®\[Download for Windows\]ã‚’é¸æŠã—ã€DockerDesktopã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã€‚

![install-docker-2.png](https://raw.githubusercontent.com/takuya-motoshima/zenn-content/main/articles/ec98e0a2e5e53b/install-docker-2.png)

ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸDocker Desktop Installer.exeã‚’å®Ÿè¡Œã—ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’é€²ã‚ã‚‹ã€‚  
OSã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒWSL2ã«å¯¾å¿œã—ã¦ã„ã‚‹å ´åˆã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆçŠ¶æ…‹ã§WSL2ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã€‚  
\[Install required Windows components for WSL 2\]ãŒã€ãƒã‚§ãƒƒã‚¯ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã€æ¬¡ã¸é€²ã‚€ã€‚

![install-docker-3.png](https://raw.githubusercontent.com/takuya-motoshima/zenn-content/main/articles/ec98e0a2e5e53b/install-docker-3.png)

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå®Œäº†ã—ãŸã‚‰DockerDesktopã‚’èµ·å‹•ã™ã‚‹ã€‚

![install-docker-4.png](https://raw.githubusercontent.com/takuya-motoshima/zenn-content/main/articles/ec98e0a2e5e53b/install-docker-4.png)

DockerãŒèµ·å‹•ã—ãŸã‚‰ã€\[Skip tutorial\]ã‚’é¸æŠã—ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦ã€æ¬¡ã¸é€²ã‚€ã€‚

![install-docker-5.png](https://raw.githubusercontent.com/takuya-motoshima/zenn-content/main/articles/ec98e0a2e5e53b/install-docker-5.png)

\[Settings â€“ Resources â€“ WSL INTEGRATION\]ã‚’é–‹ã\[Utuntu-20.04\]ã«ãƒã‚§ãƒƒã‚¯ã‚’ã—ã€  
Utuntu-20.04ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®WSLãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã—ã¦è¨­å®šã—ã€  
WSL2ã«æ§‹ç¯‰ã—ãŸUtuntu-20.04ä¸Šã§Dockerã‚³ãƒãƒ³ãƒ‰ã®ä½¿ç”¨ã‚’è¡Œãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

![install-docker-6.png](https://raw.githubusercontent.com/takuya-motoshima/zenn-content/main/articles/ec98e0a2e5e53b/install-docker-6.png)

ä»¥ä¸Šã§ã€Dockerã®ç’°å¢ƒæ§‹ç¯‰ã¯å®Œäº†ã€‚

# å…¬å¼ã®hello-worldã§åŸºæœ¬çš„ãªä»•çµ„ã¿ã‚’ç†è§£ã™ã‚‹

WindowsTerminalã‚’é–‹ãã€WSL2ã«æ§‹ç¯‰ã—ãŸUtuntu-20.04ã«æ¥ç¶šã™ã‚‹ã€‚

![install-docker-6.png](https://raw.githubusercontent.com/takuya-motoshima/zenn-content/main/articles/ec98e0a2e5e53b/hellorworld-1.png)

ã¾ãšã¯docker runã‚³ãƒãƒ³ãƒ‰ã§ã€å…¬å¼ã®hello-worldã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å–å¾—ã€ã‚³ãƒ³ãƒ†ãƒŠã®å®Ÿè¡Œã‚’ã—ã¦ã¿ã‚‹ã€‚  
ã‚³ãƒ³ãƒ†ãƒŠã¨ã¯ã‚¢ãƒ—ãƒªã‚„ã‚¤ãƒ³ãƒ•ãƒ©ãªã©ã‚’å…¥ã‚ŒãŸç®±ã§ã‚ã‚Šã€ã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ã¯ã‚³ãƒ³ãƒ†ãƒŠã‚’å®Ÿè¡Œã™ã‚‹ãŸã‚ã«å¿…è¦ãªãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®ã“ã¨ã§ã‚ã‚‹ã€‚

```sh
$ docker container run hello-world;
Unable to find image 'hello-world:latest' locally
latest: Pulling from library/hello-world
b8dfde127a29: Pull complete
Digest: sha256:9f6ad537c5132bcce57f7a0a20e317228d382c3cd61edae14650eec68b2b345c
Status: Downloaded newer image for hello-world:latest

Hello from Docker!
This message shows that your installation appears to be working correctly.

To generate this message, Docker took the following steps:
 1. The Docker client contacted the Docker daemon.
 2. The Docker daemon pulled the "hello-world" image from the Docker Hub.
    (amd64)
 3. The Docker daemon created a new container from that image which runs the
    executable that produces the output you are currently reading.
 4. The Docker daemon streamed that output to the Docker client, which sent it
    to your terminal.

To try something more ambitious, you can run an Ubuntu container with:
 $ docker run -it ubuntu bash

Share images, automate workflows, and more with a free Docker ID:
 https://hub.docker.com/

For more examples and ideas, visit:
 https://docs.docker.com/get-started/
```

hello-worldã‚³ãƒ³ãƒ†ãƒŠã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ããŸã€‚  
ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã¯ã‚³ãƒãƒ³ãƒ‰å®Ÿè¡Œå¾Œã«èµ·ã“ã£ãŸã“ã¨ã®èª¬æ˜ãŒæ›¸ã‹ã‚Œã¦ã„ã‚‹ã€‚

```sh
Unable to find image 'hello-world:latest' locally
latest: Pulling from library/hello-world
b8dfde127a29: Pull complete
Digest: sha256:9f6ad537c5132bcce57f7a0a20e317228d382c3cd61edae14650eec68b2b345c
Status: Downloaded newer image for hello-world:latest
```

ä¸Šè¨˜ã¯ã€åˆã‚ã¦ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å–å¾—ã™ã‚‹å ´åˆè¡¨ç¤ºã•ã‚Œã‚‹ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã‚ã‚‹ã€‚
ç°¡å˜ã«è§£èª¬ã™ã‚‹ã¨ã€  

- ãƒ­ãƒ¼ã‚«ãƒ«ã«hello-world:latestãŒå­˜åœ¨ã—ãªã„ãŸã‚Docker Hubã‚ˆã‚Šã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å–å¾—
- ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’sha256ã§ãƒãƒƒã‚·ãƒ¥åŒ–
- hello-wolrd:latestãŒãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸã“ã¨ã‚’è¡¨ã—ã¦ã„ã‚‹

å¾Œã‚ã«å­˜åœ¨ã™ã‚‹latestã¯ã‚¿ã‚°ã§ã€ã‚³ãƒãƒ³ãƒ‰ã‚’ã‚¿ã‚°æŒ‡å®šãªã—ã§å®Ÿè¡Œã—ãŸå ´åˆã€ã‚¿ã‚°ã¯è‡ªå‹•çš„ã«latestãŒé¸æŠã•ã‚Œã‚‹ã€‚  

ç¾åœ¨ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ã‚³ãƒ³ãƒ†ãƒŠã‚’ç¢ºèªã—ã¦ã¿ã‚‹ã€‚  

```sh
$ docker image ls;
REPOSITORY    TAG       IMAGE ID       CREATED        SIZE
hello-world   latest    d1165f221234   4 months ago   13.3kB
```

latestã‚¿ã‚°ã‚’æŒã£ãŸhello-worldã‚¤ãƒ¡ãƒ¼ã‚¸ãŒç¢ºèªã§ããŸã€‚  
èµ·å‹•ä¸­ã®ã‚³ãƒ³ãƒ†ãƒŠã‚’ç¢ºèªã—ã¦ã¿ã‚‹ã€‚

```sh
$ docker container ls;
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
```

ä½•ã‚‚å­˜åœ¨ã—ãªã„ã€‚  
hello-worldã‚³ãƒ³ãƒ†ãƒŠã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å‡ºåŠ›ãŒçµ‚ã‚ã‚‹ã¨ã‚³ãƒ³ãƒ†ãƒŠã‚’åœæ­¢ã—ã¦ã—ã¾ã†ãŸã‚ã€èµ·å‹•ã—ã¦ã„ãªã„ã€‚
-a ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä»˜ã‘ã€åœæ­¢ä¸­ã®ã‚³ãƒ³ãƒ†ãƒŠã‚‚è¡¨ç¤ºã—ã¦è¦‹ã‚‹ã€‚

```sh
$ docker container ls -a;
CONTAINER ID   IMAGE         COMMAND    CREATED         STATUS                     PORTS     NAMES
ce078f901c88   hello-world   "/hello"   8 minutes ago   Exited (0) 8 minutes ago             quirky_haibt
```

ã“ã‚Œã§hello-worldã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ã‚³ãƒ³ãƒ†ãƒŠã‚’ç¢ºèªã§ããŸã€‚  
æœ€å¾Œã«ã“ã‚Œã‚‰ã‚’å‰Šé™¤ã—ã¦ã€å…¬å¼ã®hello-worldã‚³ãƒ³ãƒ†ãƒŠã®ç¢ºèªã‚’çµ‚ãˆã‚‹ã€‚

```sh
# ã‚³ãƒ³ãƒ†ãƒŠã‚’å‰Šé™¤ã€‚docker container ls -aã‚³ãƒãƒ³ãƒ‰ã§ç¢ºèªã—ãŸã‚³ãƒ³ãƒ†ãƒŠIDã‚’æŒ‡å®šã€‚
$ docker container rm ce078f901c88;
ce078f901c88

# ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’å‰Šé™¤ã€‚docker image lsã‚³ãƒãƒ³ãƒ‰ã§ç¢ºèªã—ãŸã‚¤ãƒ¡ãƒ¼ã‚¸IDã‚’æŒ‡å®šã€‚
$ docker image rm d1165f221234;
Untagged: hello-world:latest
Untagged: hello-world@sha256:df5f5184104426b65967e016ff2ac0bfcd44ad7899ca3bbcf8e44e4461491a9e
Deleted: sha256:d1165f2212346b2bab48cb01c1e39ee8ad1be46b87873d9ca7a4e434980a7726
Deleted: sha256:f22b99068db93900abe17f7f5e09ec775c2826ecfe9db961fea68293744144bd
```

docker container rm <ã‚³ãƒ³ãƒ†ãƒŠID>ã§ã‚³ãƒ³ãƒ†ãƒŠã®å‰Šé™¤ã€  
docker image rm <ã‚¤ãƒ¡ãƒ¼ã‚¸ID>ã§ã‚¤ãƒ¡ãƒ¼ã‚¸ã®å‰Šé™¤ã‚’è¡Œã£ãŸã€‚  
ä»¥ä¸Šã§ã€å…¬å¼ã®hello-worldã‚³ãƒ³ãƒ†ãƒŠã®ç¢ºèªã¯å®Œäº†ã€‚

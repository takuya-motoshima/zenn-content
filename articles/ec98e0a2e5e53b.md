---
title: "Dockerç’°å¢ƒæ§‹ç¯‰ for Windows"
emoji: "ğŸ‘»"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["docker", "windows", "wsl"]
published: false
---

# Dockerç’°å¢ƒæ§‹ç¯‰

## Windowsã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Windowsã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’[Microsoft Store](https://aka.ms/terminal)ã‹ã‚‰ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã€‚

![install-windows-terminal.png](ec98e0a2e5e53b/install-windows-terminal.png)

## Gitã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

Gitã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©ã‚’[https://git-scm.com/download/win](https://git-scm.com/download/win)ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—å®Ÿè¡Œã™ã‚‹ã€‚  
å®Ÿè¡Œã—ãŸã‚‰ãƒ©ã‚¤ã‚»ãƒ³ã‚¹ã®å†…å®¹ã«åŒæ„ã—æ¬¡ã¸é€²ã‚€ã€‚

![install-git-1.png](ec98e0a2e5e53b/install-git-1.png)

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®é¸æŠã§ã€ä½•ã‚‚å¤‰æ›´ã›ãšæ¬¡ã¸é€²ã‚€ã€‚

![install-git-2.png](ec98e0a2e5e53b/install-git-2.png)

æ–°ã—ã„ãƒªãƒã‚¸ãƒˆãƒªã®æœ€åˆã®ãƒ–ãƒ©ãƒ³ãƒåã‚’è¨­å®šã™ã‚‹ã€‚  
GitHubã®ä»•æ§˜ã«åˆã‚ã›ã¦mainã«å¤‰æ›´ã—æ¬¡ã¸é€²ã‚€ã€‚

![install-git-3.png](ec98e0a2e5e53b/install-git-3.png)

Gitã«æ¥ç¶šã™ã‚‹éš›ã«èªè¨¼è£œåŠ©ã‚’ä½¿ç”¨ã™ã‚‹ã‹ã©ã†ã‹ã‚’è¨­å®šã™ã‚‹ã€‚  
[Git Credential Manager Core]ã‚’é¸æŠã—æ¬¡ã¸é€²ã‚€ã€‚  
â€»[Git Credential Manager Core]ã¯ã€GitHubç­‰ã¨æ¥ç¶šã—ãŸæ™‚ã®2å›ç›®ä»¥é™ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼åã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ã®å…¥åŠ›ã‚’çœç•¥ã™ã‚‹ã€‚

![install-git-4.png](ec98e0a2e5e53b/install-git-4.png)

è¿½åŠ ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®è¨­å®šã€‚  
ä½•ã‚‚é¸æŠã›ãšã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¸é€²ã‚€ã€‚

![install-git-5.png](ec98e0a2e5e53b/install-git-5.png)

GitBashã‚’é–‹ãã€Gitã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ç¢ºèªã€‚

```sh
git --version;
# git version 2.32.0.windows.1
```

ä»¥ä¸Šã§ã€Gitã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¯å®Œäº†ã€‚

## WSL2æœ‰åŠ¹åŒ–

PowerShellã‚’é–‹ãã€ä»¥ä¸‹ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œã—ç®¡ç†è€…ã¨ã—ã¦PowerShellã‚’é–‹ãã€‚

```sh
Start-Process powershell.exe -Verb runas;
```

Linuxç”¨Windowsã‚µãƒ–ã‚·ã‚¹ãƒ†ãƒ ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã€‚

```sh
dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart;
```

ä»®æƒ³ãƒã‚·ãƒ³ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã‚ªãƒ—ã‚·ãƒ§ãƒ³æ©Ÿèƒ½ã‚’æœ‰åŠ¹ã«ã™ã‚‹ã€‚

```sh
dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart;
```

ãƒã‚·ãƒ³ã‚’å†èµ·å‹•ã—ã€Linuxã‚«ãƒ¼ãƒãƒ«æ›´æ–°ãƒ—ãƒ­ã‚°ãƒ©ãƒ ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’[ã“ã“](https://wslstorestorage.blob.core.windows.net/wslblob/wsl_update_x64.msi)ã‹ã‚‰ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—å®Ÿè¡Œã™ã‚‹ã€‚

![enable-wsl2-1.png](ec98e0a2e5e53b/enable-wsl2-1.png)

ä¸€èˆ¬ãƒ¦ãƒ¼ã‚¶ã§ã€PowerShellã‚’é–‹ãæ–°ã—ã„Linuxãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸéš›ã®æ—¢å®šã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã«WSL2ã‚’è¨­å®šã™ã‚‹ã€‚

```sh
wsl --set-default-version 2;
```

Microsoft Storeã‚’é–‹ãã€[ã“ã“](https://www.microsoft.com/store/apps/9n6svws3rx71)ã‹ã‚‰ã€Ubuntu 20.04 LTSãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã€‚

![enable-wsl2-2.png](ec98e0a2e5e53b/enable-wsl2-2.png)

æ–°ã—ãã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ãŸLinuxãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚’åˆã‚ã¦èµ·å‹•ã™ã‚‹ã¨ã€ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãŒé–‹ãã®ã§ã€æ–°ã—ã„Linuxãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’ä½œæˆã€‚  

```sh
Installing, this may take a few minutes...
Please create a default UNIX user account. The username does not need to match your Windows username.
For more information visit: https://aka.ms/wslusers
Enter new UNIX username: takuya-motoshima
New password:
Retype new password:
passwd: password updated successfully
Installation successful!
```

ä»¥ä¸Šã§ã€WindowsOSã¨å®Œå…¨ã«çµ±åˆã•ã‚ŒãŸLinuxãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨è¨­å®šã¯å®Œäº†ã€‚

## Dockerã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

[https://www.docker.com/](https://www.docker.com/)ã‚’é–‹ãã€[Get started]ã‚’é¸æŠã—ã€DockerDesktopã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ãƒšãƒ¼ã‚¸ã‚’é–‹ãã€‚

![install-docker-1.png](ec98e0a2e5e53b/install-docker-1.png)

\[Docker Desktop\]ã®\[Download for Windows\]ã‚’é¸æŠã—ã€DockerDesktopã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã€‚

![install-docker-2.png](ec98e0a2e5e53b/install-docker-2.png)

ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸDocker Desktop Installer.exeã‚’å®Ÿè¡Œã—ã€ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚’é€²ã‚ã‚‹ã€‚  
OSã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒWSL2ã«å¯¾å¿œã—ã¦ã„ã‚‹å ´åˆã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆçŠ¶æ…‹ã§WSL2ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã€‚  
\[Install required Windows components for WSL 2\]ãŒã€ãƒã‚§ãƒƒã‚¯ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã€æ¬¡ã¸é€²ã‚€ã€‚

![install-docker-3.png](ec98e0a2e5e53b/install-docker-3.png)

ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãŒå®Œäº†ã—ãŸã‚‰DockerDesktopã‚’èµ·å‹•ã™ã‚‹ã€‚

![install-docker-4.png](ec98e0a2e5e53b/install-docker-4.png)

DockerãŒèµ·å‹•ã—ãŸã‚‰ã€\[Skip tutorial\]ã‚’é¸æŠã—ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ã‚’ã‚¹ã‚­ãƒƒãƒ—ã—ã¦ã€æ¬¡ã¸é€²ã‚€ã€‚

![install-docker-5.png](ec98e0a2e5e53b/install-docker-5.png)

\[Settings â€“ Resources â€“ WSL INTEGRATION\]ã‚’é–‹ã\[Utuntu-20.04\]ã«ãƒã‚§ãƒƒã‚¯ã‚’ã—ã€  
Utuntu-20.04ã‚’ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®WSLãƒ‡ã‚£ã‚¹ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã—ã¦è¨­å®šã—ã€  
WSL2ã«æ§‹ç¯‰ã—ãŸUtuntu-20.04ä¸Šã§Dockerã‚³ãƒãƒ³ãƒ‰ã®ä½¿ç”¨ã‚’è¡Œãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚

![install-docker-6.png](ec98e0a2e5e53b/install-docker-6.png)

ä»¥ä¸Šã§ã€Dockerã®ç’°å¢ƒæ§‹ç¯‰ã¯å®Œäº†
ã€‚
